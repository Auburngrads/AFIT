\usepackage{hyperref}
\usepackage[font={bf,footnotesize},labelsep=period]{caption}
\usepackage{geometry}
\usepackage{setspace}
\usepackage{indentfirst}
\usepackage{float}
\usepackage{flafter}
\usepackage{amssymb,amsmath,amsfonts}
\usepackage{theorem}
%\usepackage[square]{natbib}
\usepackage{varioref} 
\usepackage{tocbibind} 
\usepackage{listings} 
\usepackage{xspace}
\usepackage{fixltx2e}
\usepackage{threeparttable}
\usepackage{booktabs}
\usepackage{color}
\usepackage{url}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[raggedright]{titlesec}
\usepackage{titletoc}
\usepackage{ifpdf}
\ifpdf
\usepackage[pdftex]{graphicx}
\DeclareGraphicsExtensions{.jpg, .pdf, .png}
\else
\usepackage{graphicx}
\DeclareGraphicsExtensions{.eps}
\fi
\providecommand{\tightlist}{%
\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\let\proglang=\textsf
\newcommand{\pkg}[1]{{\fontseries{b}\selectfont #1}}
%\DefineVerbatimEnvironment{Code}{Verbatim}{}
%% Define default document values
\geometry{top=1in,bottom=1.25in,left=1.25in,right=1.25in}
\def\afittocfootskip{0.41in}      %if above margins change, routines 
                                  %using this command may require 
                                  %retuning (alm)
\def\tocSpace{0.0em}
\def\lofSpace{1.0em plus 1pt}
\def\tocStart{1.0em plus 1pt}
\def\lofStart{0.0in}

\makeindex
\doublespacing  % options include \singlespacing, \onehalfspacing, 
                % \doublespacing or \setstretch{baselinestretch}
\pagestyle{plain}

% Some color definitions...
\definecolor{LemonChiffon}{rgb}{1.,0.98,0.8}
\definecolor{LightBlue}{rgb}{0.68,0.85,0.9}
\definecolor{USAFblue}{rgb}{.1,.1,.6}
\definecolor{Pink}{rgb}{1,0.75,0.8}
\definecolor{Gold}{rgb}{1,0.84,0}
\definecolor{Reda}{rgb}{0.9,0.3,0.7}
\definecolor{Redb}{rgb}{0.9,0.3,1}
\definecolor{Beige}{rgb}{0.96,0.96,0.86}
\definecolor{Yellow}{rgb}{1,0.84,0.8}
\definecolor{LightCyan}{rgb}{0.88,1,1}
\definecolor{FireOrange}{rgb}{0.9,0.4,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{LTgray}{gray}{0.8}
\definecolor{DKgray}{gray}{0.3}	
\definecolor{Green}{rgb}{0,0.4,0}
%==================================================================
%		TABLE OF CONTENTS, LIST OF FIGURES/TABLE, etc.             
%==================================================================
%    define PAGE STYLES for the table of contents places headings
%    within the designated margins and adjusts the textheight
%    accordingly.  This code is not pretty.  When redefining vertical
%    margins, command \vsplit is the key to success
  
\def\listEntry{Entry}
\def\ps@afittoc{%
	\let\@mkboth\@gobbletwo
	\def \@oddhead{}
	\def \@oddfoot{\rm 
	      \hfil{\thepage}\hfil\thispagestyle{afittocn}}
	\let \@evenhead\@oddhead \let \@evenfoot\@oddfoot
	\footskip=\afittocfootskip
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                 %
%   \def\ps@afittocn{                                             %
%           \let\@mkboth\@gobbletwo                               %
%           \def \@oddhead{}                                      %
%           \def \@oddfoot{\rm                                    %
%                 \hfil{\thepage}\hfil\thispagestyle{afittocn}}   %
%           \let \@evenhead\@oddhead \let \@evenfoot\@oddfoot     %
%           \footskip=\afittocfootskip                            %
%   }                                                             %
%                                                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newbox\@tocboxa
\newbox\@tocboxb
\def\ps@afittocn{
        \let\@mkboth\@gobbletwo	
	\def \@oddhead{}
	\def \@oddfoot{\rm
	      \hfil{\thepage}\hfil\thispagestyle{afittocn}}
	\let \@evenhead\@oddhead \let \@evenfoot\@oddfoot
	\footskip=\afittocfootskip 
 	\setbox\@outputbox\vbox{\listEntry\hfill{Page} \tocSkipStart 
	\unvbox\@tocboxa \tocSkip 
	                 \unvbox\@outputbox}        
	\setbox\@tocboxb\vsplit\@outputbox to\textheight
        \global\setbox\@tocboxa\vbox{\tocSkip \unvbox\@outputbox \unskip}
	\setbox\@outputbox\copy\@tocboxb 
}

% =====================  TABLE OF CONTENTS  =======================
\renewcommand\@pnumwidth{0em {\hss}}
\renewcommand{\@dotsep}{2}
\renewcommand{\@tocrmarg}{4em plus2fil}
\newif\if@toc \@tocfalse
\renewcommand\tableofcontents{%
    \vspace*{-20pt}
    \if@twocolumn
      \@restonecoltrue\onecolumn
    \else
      \@restonecolfalse
    \fi
    \begingroup% temporarily set if@toc so that \@schapter will not
	        % put Table of Contents in the table of contents.
      \@toctrue
      \chapter*{\contentsname}
    \endgroup
    \def\listEntry{\@empty}
    \thispagestyle{afittoc}
    \baselineskip=14pt 
    \def\tocSkip{\vskip \tocSpace}
    \def\tocSkipStart{\vskip \tocStart}
    {\raggedleft Page \vskip 1.0em \par\vskip-\parskip} 
    \@starttoc{toc}%
    \newpage   
    \ifx\@tocboxa\@empty 
    \else
      \thispagestyle{afittocn}
      \unvbox\@tocboxa
      \newpage
    \fi 
    \if@restonecol\twocolumn\fi 
    \baselineskip=\normalbaselineskip
    \thispagestyle{plain}
  }

\def\l@appendix{\pagebreak[3]
 \vskip \tocSpace % space above appendix line
  \@dottedtocline{0}{0em}{6.4em}}

\def\l@chapter{\pagebreak[3]
 \vskip \tocSpace 
  \@dottedtocline{0}{0em}{2.4em}}

% For documents with more than 7 chapters you'll need to make
% adjustments here
\renewcommand\l@section{\@dottedtocline{1}{2.4em}{2em}}
\renewcommand\l@subsection{\@dottedtocline{2}{4.4em}{3em}}
\renewcommand\l@subsubsection{\@dottedtocline{3}{7.4em}{4em}}
%\renewcommand\l@paragraph{\@dottedtocline{4}{13.5em}{5em}}
%\renewcommand\l@subparagraph{\@dottedtocline{5}{16em}{6em}}
% =====================  LIST OF FIGURES  =======================
\renewcommand\listoffigures{%
  \@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn\fi
  \chapter*{\listfigurename}%
  \def\listEntry{Figure}
  \addcontentsline{toc}{chapter}{List of Figures}
  \addtocontents{toc}{\protect\addvspace{10pt}}
  \thispagestyle{afittoc}
  \baselineskip=14pt% 
  \def\tocSkip{\vskip \lofSpace}
  \def\tocSkipStart{\vskip \lofStart}

  {\hbox to \hsize{Figure\hfil Page} \vskip 0.0em \par\vskip-\parskip}%
  
  \@starttoc{lof}%
    \newpage   
    \ifx\@tocboxa\@empty 
    \else
      \thispagestyle{afittocn}
      \unvbox\@tocboxa
      \newpage
    \fi 
   \if@restonecol\twocolumn\fi
   \baselineskip=\normalbaselineskip 
   \thispagestyle{plain}
}%

\def\l@figure{\pagebreak[3]
 \vskip \lofSpace 
 \@dottedtocline{1}{0.25em}{4.0em}}
% =====================  LIST OF TABLES  =======================
\renewcommand\listoftables{%
  \@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn\fi
  \chapter*{\listtablename}%
  \def\listEntry{Table}
  \addcontentsline{toc}{chapter}{List of Tables}
  \addtocontents{toc}{\protect\addvspace{10\p@}}
  \thispagestyle{afittoc}
  \baselineskip=14pt%  
  \def\tocSkip{\vskip \lofSpace}
  \def\tocSkipStart{\vskip \lofStart}

  {\hbox to \hsize{Table\hfil Page} \vskip 0.0em\par\vskip-\parskip}%   changed to 0.0em

  \@starttoc{lot}%
    \newpage   
    \ifx\@tocboxa\@empty 
    \else
      \thispagestyle{afittocn}
      \unvbox\@tocboxa
      \newpage
    \fi 
  \if@restonecol\twocolumn\fi
  \baselineskip=\normalbaselineskip 
  \thispagestyle{plain}
}%
%==================================================================
%    		 REMOVE FROM RESET              
%==================================================================
%Date: Sat, 30 Jul 1994 17:58:55 PST
%From: Donald Arseneau <asnd@erich.triumf.ca>
%
%  \@removefromreset{B}{A} : Removes counter B from the list of
%                       counters \cl@A to be reset when counter A
%                       is stepped.  The opposite of \@addtoreset.

\def\@removefromreset#1#2{\let\@tempb\@elt
   \expandafter\let\expandafter\@tempa\csname c@#1\endcsname
   \def\@elt##1{\expandafter\ifx\csname c@##1\endcsname\@tempa\else
	 \noexpand\@elt{##1}\fi}%
   \expandafter\edef\csname cl@#2\endcsname{\csname cl@#2\endcsname}%
   \let\@elt\@tempb}
%==================================================================
%    	Set LEVEL, NUMBERING, and HEADING defaults              
%==================================================================
% LEVELS
\renewcommand\thechapter       {\Roman{chapter}}
\renewcommand\thesection       {\arabic{chapter}.\arabic{section}}
\renewcommand\thesubsection    {\thesection.\arabic{subsection}}
\renewcommand\thesubsubsection {\thesubsection.\arabic{subsubsection}}
\renewcommand\theparagraph     {\thesubsubsection.\arabic{paragraph}}
\renewcommand\thesubparagraph  {\theparagraph.\arabic{subparagraph}}
% NUMBERING ** Set page, equation, table, and figure to 
% STRAIGHT-THROUGH-THE-TEXT vs. BY CHAPTER numbering here
% Currently set to straight through
\@removefromreset{figure}{chapter}
\@removefromreset{equation}{chapter}
\@removefromreset{table}{chapter}
\renewcommand\theequation{\arabic{equation}}
\renewcommand\thefigure{\arabic{figure}}
\renewcommand\thetable{\arabic{table}}

\def\appflag{Appendix}

\renewcommand\appendix{\par
    \setcounter{chapter}{0}%
    \setcounter{section}{0}%
    \gdef\@chapapp{Appendix}%
    \gdef\thechapter{\@Alph\c@chapter}
    }
%==================================================================
%    		 CHAPTERS             
%==================================================================   
% Rewrite \chapter to add proper punctuation in Table of Contents

\renewcommand\chapter{\if@openright\cleardoublepage\else\clearpage\fi
      \thispagestyle{plain}
      \global\@topnum\z@
      \@afterindentfalse
      \secdef\@chapter\@schapter}
      \def\@chapter[#1]#2{
      \ifnum \c@secnumdepth >\m@ne
         \if@mainmatter
            \refstepcounter{chapter}
            \typeout{\@chapapp\space\thechapter.}
            \addtocontents{toc}{\protect\addvspace{10\p@}}
            \ifx\@chapapp\appflag
                \addcontentsline{toc}{appendix}{\protect\numberline{Appendix \thechapter.}#1}
            \else
                \addcontentsline{toc}{chapter}{\protect\numberline{\thechapter.}#1}
            \fi
            \addtocontents{toc}{\protect\addvspace{10\p@}}
         \else
            \addcontentsline{toc}{chapter}{#1}
         \fi
      \else
         \addcontentsline{toc}{chapter}{#1}
      \fi
      \chaptermark{#1}
      \if@twocolumn
         \@topnewpage[\@makechapterhead{#2}]
      \else
         \@makechapterhead{#2}
         \@afterheading
      \fi}

% Standardize all chapter heads with an exception for Chapter I
\def\@makechapterhead#1{%
    {\parindent 0pt
     \begin{center}
	\singlespace 
     \ifx\@chapapp\appflag
	\large {\bfseries \@chapapp\ \thechapter.\ \ #1}
	\else
	\ifnum\value{chapter}=1
	  \vspace*{2 pc}
	  \doublespacing
	  {$title$}\\
	  \vspace*{1 pc}
	\fi
	\large{\bfseries \thechapter.\ \ #1}
	\vspace*{1 pc}
       \fi
     \end{center}
    }
  }%
%\titleformat{\chapter}[block]{\centering\MakeUppercase{\LARGE\selectfont}}{}{0em}{}
